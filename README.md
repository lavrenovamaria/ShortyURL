# ShortyURL

## Суть программы

Программа ShortyURL - это веб-приложение для сокращения URL-адресов. 

![photo_2023-04-14_11-13-24](https://user-images.githubusercontent.com/84707645/231985497-85112774-cae3-44cf-a83b-dc0a045f398c.jpg)


В основе приложения лежит Spring Boot, который предоставляет функциональность 
для создания веб-приложений на основе аннотаций и управления зависимостями.
Основные принципы и шаблоны:

MVC (Model-View-Controller): контроллеры принимают HTTP-запросы и обрабатывают их. В данном случае, веб-шаблоны не используются, 
а вместо этого клиентское приложение работает с API контроллера напрямую.
Dependency Injection (внедрение зависимостей): зависимости передаются в компоненты через их конструкторы, а Spring Boot инициализирует
и управляет этими зависимостями.

Тесты и MockMvc:
Тесты написаны с использованием JUnit и Spring Test. Они позволяют проверять различные аспекты приложения, такие как корректность 
ответов на запросы и поведение компонентов.
MockMvc используется для тестирования контроллеров. Он позволяет отправлять запросы и проверять ответы без необходимости развертывать 
приложение на сервере. Вместо этого, запросы и ответы обрабатываются в тестовом окружении.

## Как работают тесты

Например тестируется UrlShorteningController с использованием MockMvc. 

Вот как происходит процесс тестирования:

    @ExtendWith(SpringExtension.class) и @WebMvcTest(UrlShorteningController.class) настраивают тестовый контекст Spring Boot и MockMvc для тестирования UrlShorteningController.

    @Autowired используется для внедрения зависимостей MockMvc и ObjectMapper в тестовый класс.

    @MockBean создает и регистрирует мок-версию UrlShorteningService в тестовом контексте Spring.

    @BeforeEach определяет метод setUp(), который выполняется перед каждым тестом для инициализации testUrlMapping объекта.

В тестовых методах (shouldCreateShortUrl, shouldRedirectToLongUrl, shouldReturnNotFoundForInvalidShortCode) выполняются следующие действия:

a. Настраиваются моки с помощью when и thenReturn. Это позволяет заменить реальное поведение urlShorteningService на имитацию, которая возвращает предопределенный результат.

b. Выполняется HTTP-запрос с использованием mockMvc.perform(), передавая нужные параметры, такие как тип запроса (POST, GET), путь и контент.

c. Ожидаемые результаты проверяются с помощью методов andExpect(). Здесь проверяются статус ответа, содержимое ответа и дополнительные атрибуты, такие как перенаправление.

Таким образом, данный тест использует MockMvc для отправки HTTP-запросов к UrlShorteningController и проверки ответов. Моки вместо реальных объектов используются для изоляции тестируемых компонентов от зависимостей и контроля над поведением этих зависимостей во время тестирования.
